<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vendor Dashboard - Dhamaka</title>
<style>
body{font-family:Arial,sans-serif;background:#f8f9fa;color:#212529;padding:1em;}
h2{text-align:center;}
form{max-width:400px;margin:1em auto;background:white;padding:1em;border-radius:12px;box-shadow:2px2px10px rgba(0,0,0,0.2);}
input,select{width:100%;padding:0.5em;margin:0.3em 0;border-radius:5px;border:1px solid #ccc;}
button{width:100%;padding:0.5em;border:none;border-radius:5px;background:#28a745;color:white;cursor:pointer;margin-top:0.5em;}
button:hover{background:#218838;}
#msg{color:red;text-align:center;}
#myProducts{margin-top:2em;}
.product-item{background:white;padding:1em;margin:0.5em 0;border-radius:8px;box-shadow:1px1px5px rgba(0,0,0,0.1);}
.product-item span{display:block;margin-top:0.3em;}
</style>
</head>
<body>

<h2>Vendor Dashboard</h2>
<button onclick="logout()">Logout</button>

<form id="addProductForm">
<h3>Add New Product</h3>
<input type="text" id="pName" placeholder="Product Name" required>
<input type="number" id="pPrice" placeholder="Price" required>
<input type="number" id="pStock" placeholder="Stock Quantity" required>
<select id="pCategory">
<option value="All">Select Category</option>
<option value="Electronics">Electronics</option>
<option value="Clothing">Clothing</option>
<option value="Home">Home</option>
</select>
<button type="submit">Add Product</button>
<p id="msg"></p>
</form>

<div id="myProducts">
<h3>My Products (Pending Admin Approval)</h3>
<div id="productList"></div>
</div>

<script>
let currentVendor = JSON.parse(localStorage.getItem('currentVendor')||'{}');
if(!currentVendor.id){
alert('Please login first');
window.location.href='vendor-login.html';
}

let products = JSON.parse(localStorage.getItem('products')||'[]');

function renderMyProducts(){
let list = document.getElementById('productList');
list.innerHTML='';
products.filter(p=>p.vendor===currentVendor.id).forEach(p=>{
let div = document.createElement('div');
div.className='product-item';
div.innerHTML=`<strong>${p.name}</strong> - $${p.price} | Stock: ${p.stock} <span>Status: ${p.status}</span>`;
list.appendChild(div);
});
}

document.getElementById('addProductForm').addEventListener('submit',function(e){
e.preventDefault();
let name = document.getElementById('pName').value;
let price = document.getElementById('pPrice').value;
let stock = document.getElementById('pStock').value;
let category = document.getElementById('pCategory').value;
let newProduct = {
name:name,
price:Number(price),
stock:Number(stock),
category:category,
vendor:currentVendor.id,
status:'Pending' // admin approval needed
};
products.push(newProduct);
localStorage.setItem('products',JSON.stringify(products));
document.getElementById('msg').innerText='Product added! Waiting for admin approval.';
renderMyProducts();
});

function logout(){
localStorage.removeItem('currentVendor');
window.location.href='vendor-login.html';
}

// Initial render
renderMyProducts();
</script>
</body>
</html>
