<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dhamaka Daily Items - Shop</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:Arial,sans-serif;background:#d4edda;color:#155724;transition:0.3s;}
body.dark{background:#121212;color:#ddd;}
header{background:#28a745;color:white;padding:1em;display:flex;justify-content:space-between;flex-wrap:wrap;align-items:center;position:sticky;top:0;z-index:10;}
header h1{margin:0;font-size:1.5em;}
nav{display:flex;align-items:center;flex-wrap:wrap;}
nav a{color:white;margin-left:1em;text-decoration:none;font-weight:bold;transition:0.3s;position:relative;}
nav a:hover{text-decoration:underline;color:#ffc107;}
nav #cartLink::after{content:attr(data-count);position:absolute;top:-10px;right:-10px;background:red;color:white;width:20px;height:20px;text-align:center;line-height:20px;border-radius:50%;font-size:0.8em;display:inline-block;}
nav button{margin-left:1em;cursor:pointer;}
.page{display:none;padding:1em;}
h1,h2,h3{text-align:center;margin-bottom:0.5em;}
.product-list,.cart-list{display:flex;flex-wrap:wrap;gap:1em;justify-content:center;margin-top:1em;}
.product{border:1px solid #28a745;border-radius:12px;padding:1em;width:200px;text-align:center;background:#fff;box-shadow:2px2px10px rgba(0,0,0,0.1);transition:0.3s;position:relative;overflow:hidden;}
.product:hover{transform:scale(1.05);box-shadow:4px4px15px rgba(0,0,0,0.2);}
.product img{transition: transform 0.3s;}
.product:hover img{transform:scale(1.2);}
.badge{position:absolute;top:10px;left:10px;background:#ffc107;color:#000;padding:2px 6px;border-radius:4px;font-size:0.8em;animation:bounce 1s infinite alternate;}
@keyframes bounce{0%{transform:translateY(0);}100%{transform:translateY(-5px);}}
button{background:#28a745;color:white;border:none;padding:0.5em 1em;border-radius:5px;cursor:pointer;margin-top:0.5em;transition:0.3s;}
button:hover{background:#218838;}
input,select{padding:0.5em;margin:0.3em 0;width:90%;border-radius:5px;border:1px solid #ccc;}
#cartSummary{text-align:center;margin-top:1em;font-weight:bold;}
.carousel{display:flex;overflow:hidden;width:90%;margin:1em auto;position:relative;border-radius:12px;}
.carousel img{width:100%;border-radius:12px;transition:transform 0.5s;}
.star{color:gold;font-size:1em;cursor:pointer;}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);justify-content:center;align-items:center;animation:fadeIn 0.3s;}
.modal-content{background:#fff;padding:1em;border-radius:12px;width:90%;max-width:400px;text-align:center;}
.modal button{width:45%;margin:0.5em;}
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
#loginForm,#registerForm{max-width:400px;margin:1em auto;text-align:center;border:1px solid #ccc;padding:1em;border-radius:8px;}
#loginForm input,#registerForm input{width:80%;margin-bottom:0.5em;}
#support{position:fixed;bottom:20px;right:20px;background:#25D366;color:white;padding:10px 15px;border-radius:50px;cursor:pointer;box-shadow:2px2px10px rgba(0,0,0,0.2);}
#reviewForm{max-width:400px;margin:1em auto;text-align:center;border:1px solid #ccc;padding:1em;border-radius:8px;}
#reviewForm input, #reviewForm textarea{width:90%;margin:0.3em 0;padding:0.5em;}
#reviewList{margin-top:1em;}
.logoutBtn{background:red;}
@media(max-width:600px){ .product{width:45%; } header{flex-direction:column;align-items:flex-start;} nav a{margin:0.3em 0;} }
</style>
</head>
<body>

<header>
<h1>Dhamaka Daily Items</h1>
<nav>
<a href="#home" onclick="showPage('home')">Home</a>
<a href="#categories" onclick="showPage('categories')">Categories</a>
<a id="cartLink" href="#cart" data-count="0" onclick="showPage('cart')">Cart</a>
<button onclick="toggleDarkMode()">ðŸŒ™</button>
<button id="logoutBtn" onclick="logout()" style="display:none;">Logout</button>
</nav>
</header>

<div id="home" class="page">
<h2>Featured Products</h2>
<div class="carousel" id="carousel"></div>
<div class="product-list" id="homeList"></div>
</div>

<div id="categories" class="page">
<h2>Categories</h2>
<select id="categoryFilter" onchange="filterCategory()"><option value="All">All</option></select>
<input type="text" id="searchInput" placeholder="Search Products..." oninput="filterCategory()">
<select id="sortSelect" onchange="filterCategory()">
<option value="">Sort By</option>
<option value="price-asc">Price Lowâ†’High</option>
<option value="price-desc">Price Highâ†’Low</option>
<option value="name-asc">Name Aâ†’Z</option>
<option value="name-desc">Name Zâ†’A</option>
</select>
<div class="product-list" id="categoryList"></div>
</div>

<div id="cart" class="page">
<h2>Your Cart</h2>
<div class="cart-list" id="cartList"></div>
<div id="cartSummary"></div>
<button onclick="checkout()">Checkout</button>
</div>

<div id="registerForm" class="page">
<h2>Customer Register</h2>
<input type="text" id="regName" placeholder="Username">
<input type="text" id="regNumber" placeholder="WhatsApp Number">
<input type="password" id="regPassword" placeholder="Password">
<button onclick="registerUser()">Register</button>
<p id="registerMsg" style="color:red;"></p>
</div>

<div id="loginForm" class="page">
<h2>Customer Login</h2>
<input type="text" id="loginName" placeholder="Username">
<input type="password" id="loginPassword" placeholder="Password">
<button onclick="customerLogin()">Login</button>
<p id="loginMsg" style="color:red;"></p>
</div>

<div id="reviewForm">
<h3>Submit Review</h3>
<input type="text" id="reviewName" placeholder="Your Name">
<textarea id="reviewText" placeholder="Your review"></textarea>
<button onclick="submitReview()">Submit</button>
</div>
<div id="reviewList"></div>

<div id="support" onclick="openWhatsApp()">ðŸ’¬ Support</div>

<script>
function showPage(page){ document.querySelectorAll('.page').forEach(p=>p.style.display='none'); document.getElementById(page).style.display='block'; }
function toggleDarkMode(){ document.body.classList.toggle('dark'); }

let products = JSON.parse(localStorage.getItem("products")||'[]');
let cart = JSON.parse(localStorage.getItem("cart")||[]);
let reviews = JSON.parse(localStorage.getItem("reviews")||[]);
let users = JSON.parse(localStorage.getItem("users")||[]);
let currentUser = JSON.parse(localStorage.getItem("currentUser")||null);

const homeList = document.getElementById("homeList");
const categoryList = document.getElementById("categoryList");
const cartList = document.getElementById("cartList");
const cartLink = document.getElementById("cartLink");
const reviewList = document.getElementById("reviewList");
const carousel = document.getElementById("carousel");
const logoutBtn = document.getElementById("logoutBtn");

let imageMap = {"smartphone":"https://via.placeholder.com/150?text=Smartphone","tshirt":"https://via.placeholder.com/150?text=T-Shirt","sofa":"https://via.placeholder.com/150?text=Sofa","laptop":"https://via.placeholder.com/150?text=Laptop","jeans":"https://via.placeholder.com/150?text=Jeans","headphones":"https://via.placeholder.com/150?text=Headphones"};

function renderProducts(list, arr){
list.innerHTML='';
if(arr.length===0){ list.innerHTML="<p>No products.</p>"; return; }
arr.forEach((p,i)=>{
const div=document.createElement('div'); div.className='product';
let stars=''; for(let s=1;s<=5;s++){ stars += s<=p.rating ? 'â˜…':'â˜†'; }
let badgeHTML=p.badge?`<div class="badge">${p.badge}</div>`:'';
div.innerHTML=`${badgeHTML}<img src="${imageMap[p.image]}" width="150"><h3>${p.name}</h3><p>Category: ${p.category}</p><p>$${p.price}</p><p>Stock: ${p.stock}</p><p>${stars}</p><button onclick="addToCart(${i})">Add to Cart</button>`;
list.appendChild(div);
});
updateCartBadge();
}

function updateCartBadge(){ cartLink.setAttribute('data-count',cart.length); }

function renderCarousel(){ carousel.innerHTML=''; products.slice(0,3).forEach(p=>{const img=document.createElement('img'); img.src=imageMap[p.image]; carousel.appendChild(img);}); carouselSlide(); }
let carouselIdx=0;
function carouselSlide(){ setInterval(()=>{ const imgs=carousel.querySelectorAll('img'); imgs.forEach((img,i)=>{ img.style.transform=`translateX(-${carouselIdx*100}%)`; }); carouselIdx=(carouselIdx+1)%3; },3000); }

function renderCart(){cartList.innerHTML='';if(cart.length===0){cartList.innerHTML="<p>Cart is empty.</p>"; return;}cart.forEach((p,i)=>{const div=document.createElement('div'); div.className='product'; div.draggable=true; div.dataset.index=i; div.innerHTML=`<p>${p.name} - $<span class="price">${p.price}</span></p><input type="number" value="1" min="1" onchange="updateQuantity(${i},this.value)"><button onclick="removeFromCart(${i})">Remove</button>`; cartList.appendChild(div);}); updateCartTotal(); updateCartBadge();}

function addToCart(i){ cart.push({...products[i]}); localStorage.setItem("cart",JSON.stringify(cart)); alert("Added to cart!"); renderCart(); }
function removeFromCart(i){ cart.splice(i,1); localStorage.setItem("cart",JSON.stringify(cart)); renderCart(); }
function updateQuantity(i,val){ cart[i].price=Number(products[i].price)*Number(val); localStorage.setItem("cart",JSON.stringify(cart)); updateCartTotal(); }
function updateCartTotal(){ let total=0; cart.forEach(p=>{ total+=Number(p.price); }); document.getElementById('cartSummary').innerText=`Total: $${total}`; }
function checkout(){if(cart.length===0){ alert("Cart empty!"); return;} cart=[]; localStorage.setItem("cart",JSON.stringify(cart)); alert("Order placed successfully!"); renderCart();}

function submitReview(){let name=document.getElementById("reviewName").value; let text=document.getElementById("reviewText").value; if(!name||!text){alert("Enter name & review"); return;} reviews.push({name,text}); localStorage.setItem("reviews",JSON.stringify(reviews)); renderReviews(); document.getElementById("reviewName").value=''; document.getElementById("reviewText").value='';}
function renderReviews(){reviewList.innerHTML=''; if(reviews.length===0){reviewList.innerHTML="<p>No reviews yet.</p>"; return;} reviews.forEach(r=>{let div=document.createElement('div'); div.innerHTML=`<p><b>${r.name}:</b> ${r.text}</p>`; reviewList.appendChild(div);});}

function registerUser(){ let name=document.getElementById('regName').value; let number=document.getElementById('regNumber').value; let pass=document.getElementById('regPassword').value; if(!name||!number||!pass){document.getElementById('registerMsg').innerText="All fields required"; return;} let exist=users.find(u=>u.name===name); if(exist){document.getElementById('registerMsg').innerText="Username exists"; return;} users.push({name,number,pass}); localStorage.setItem('users',JSON.stringify(users)); alert("Registered successfully!"); showPage('loginForm');}

function customerLogin(){ let name=document.getElementById('loginName').value; let pass=document.getElementById('loginPassword').value; let user=users.find(u=>u.name===name && u.pass===pass); if(user){ currentUser=user; localStorage.setItem('currentUser',JSON.stringify(currentUser)); alert("Welcome, "+name); logoutBtn.style.display='inline'; showPage('home'); }else{ document.getElementById('loginMsg').innerText="Invalid credentials"; }}

function logout(){ currentUser=null; localStorage.removeItem('currentUser'); logoutBtn.style.display='none'; alert("Logged out"); showPage('loginForm'); }

function checkAutoLogin(){ if(currentUser){ logoutBtn.style.display='inline'; showPage('home'); }else{ showPage('loginForm'); }}

function openWhatsApp(){ if(currentUser){ window.open("https://wa.me/"+currentUser.number, "_blank"); }else{ window.open("https://wa.me/8801913821910","_blank"); }}

checkAutoLogin();
renderProducts(homeList,products);
renderProducts(categoryList,products);
renderCart();
renderCarousel();
renderReviews();
</script>
</body>
</html>
