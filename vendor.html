<html>
<h3>Your Products</h3>
<div id="myProducts"></div>
</div>
</section>


<script>
let vendors = JSON.parse(localStorage.getItem('vendors') || '[]');
let products = JSON.parse(localStorage.getItem('products') || '[]');
let current = null;


function register() {
let n = r_name.value.trim();
let e = r_email.value.trim();
let p = r_pass.value.trim();


if (!n || !e || !p) return regMsg.innerText = "All fields required";


vendors.push({ id: Date.now(), name: n, email: e, pass: p, status: "Pending" });
localStorage.setItem('vendors', JSON.stringify(vendors));


regMsg.innerText = "Registered! Waiting for admin approval.";
}


function login() {
let e = l_email.value.trim();
let p = l_pass.value.trim();


current = vendors.find(v => v.email === e && v.pass === p);


if (!current) return logMsg.innerText = "Invalid Login";
if (current.status !== "Approved") return logMsg.innerText = "Not Approved Yet";


vName.innerText = current.name;
dash.style.display = "block";
}


function addProduct() {
let name = p_name.value.trim();
let cat = p_cat.value.trim();
let price = p_price.value;
let img = p_img.value.trim();


if (!name || !cat || !price || !img) return alert("Fill all fields");


products.push({
id: Date.now(),
name,
category: cat,
price,
image: img,
vendorId: current.id,
approved: false
});


localStorage.setItem('products', JSON.stringify(products));
loadMyProducts();
}


function loadMyProducts() {
let list = myProducts;
list.innerHTML = '';


let mine = products.filter(p => p.vendorId === current.id);


mine.forEach(p => {
let div = document.createElement('div');
div.innerHTML = `<p>${p.name} - ${p.approved ? "Approved" : "Pending"}</p>`;
list.appendChild(div);
});
}
</script>
</body>
</html>
