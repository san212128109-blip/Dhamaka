<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vendor Panel - Future Ready</title>
<style>
body{font-family:Arial,sans-serif;background:#f8f9fa;color:#212529;margin:0;padding:0;}
header{background:#28a745;color:white;padding:1em;display:flex;justify-content:space-between;align-items:center;}
header h1{margin:0;}
header button{padding:0.5em 1em;border:none;border-radius:5px;background:#ffc107;color:#212529;cursor:pointer;}
.container{padding:1em;}
input,select,textarea{width:100%;padding:0.5em;margin:0.3em 0;border-radius:5px;border:1px solid #ccc;}
button.action-btn{padding:0.5em 1em;margin:0.3em;border:none;border-radius:5px;cursor:pointer; width: 48%;}
button.add{background:#28a745;color:white;}
button.update{background:#007bff;color:white;}
button.delete{background:#dc3545;color:white; width:auto;}
button.cancel{background:#6c757d;color:white;}
table{width:100%;border-collapse:collapse;margin-top:1em;}
table,th,td{border:1px solid #ccc;}
th,td{padding:0.5em;text-align:center;}
img.product-img{width:50px;height:50px;border-radius:5px;object-fit:cover;}
</style>
</head>
<body>
<header>
<h1>Vendor Panel</h1>
<button onclick="logout()">Logout</button>
</header>
<div class="container">
<div id="loginPage">
<h2>Vendor Login</h2>
<input type="text" id="vendorId" placeholder="Vendor ID">
<input type="password" id="vendorPass" placeholder="Password">
<button class="add action-btn" onclick="vendorLogin()">Login</button>
<p id="msg" style="color:red;"></p>
</div>

<div id="dashboardPage" style="display:none;">
<h2>Welcome, <span id="vendorName"></span></h2>
<a href="index.html" target="_blank" style="color:#28a745;font-weight:bold;">View Shop</a>
<div id="addProductContainer">
<h3>Add Product</h3>
<input type="hidden" id="editProductId">
<input type="text" id="prodName" placeholder="Product Name">
<input type="text" id="prodCategory" placeholder="Category">
<input type="number" id="prodPrice" placeholder="Price">
<input type="number" id="prodStock" placeholder="Stock Quantity">
<input type="url" id="prodImageURL" placeholder="Product Image URL">
<button class="add action-btn" onclick="addProduct()">Add Product</button>
<button class="update action-btn" onclick="updateProduct()" style="display:none;">Update Product</button>
<button class="cancel action-btn" onclick="resetForm()" style="display:none;">Cancel</button>
</div>
<h3>My Products</h3>
<table id="productTable">
<thead>
<tr><th>Name</th><th>Category</th><th>Price</th><th>Stock</th><th>Image</th><th>Actions</th></tr>
</thead>
<tbody></tbody>
</table>
<h3>My Orders</h3>
<div id="vendorOrderList" style="display:flex;flex-wrap:wrap;gap:1em;justify-content:center;margin-top:1em;"></div>
</div>
</div>
<script>
let vendors=JSON.parse(localStorage.getItem('vendors')||'[]');
let products=JSON.parse(localStorage.getItem('products')||'[]');
let orders=JSON.parse(localStorage.getItem('orders')||'[]');
let currentVendor=null;

function vendorLogin(){
let id=document.getElementById('vendorId').value.trim();
let pass=document.getElementById('vendorPass').value.trim();
let v=vendors.find(v=>v.id===id&&v.password===pass);
if(v){currentVendor=v;document.getElementById('vendorName').innerText=v.name;document.getElementById('loginPage').style.display='none';document.getElementById('dashboardPage').style.display='block';renderProducts();renderVendorOrders();}else{document.getElementById('msg').innerText='Invalid credentials';}}

function logout(){currentVendor=null;document.getElementById('dashboardPage').style.display='none';document.getElementById('loginPage').style.display='block';}

function renderProducts(){
let tbody=document.querySelector('#productTable tbody');tbody.innerHTML='';
products.filter(p=>p.vendorId===currentVendor.id).forEach(p=>{
let i=products.findIndex(prod=>prod.id===p.id);
tbody.innerHTML+=`<tr><td>${p.name}</td><td>${p.category}</td><td>$${p.price}</td><td>${p.stock}</td><td><img class='product-img' src='${p.imageURL}'></td><td><button class='update' onclick='editProduct(${i})'>Edit</button><button class='delete' onclick='deleteProduct(${i})'>Delete</button></td></tr>`;
});
}

function addProduct(){
let name=document.getElementById('prodName').value.trim();
let category=document.getElementById('prodCategory').value.trim();
let price=parseFloat(document.getElementById('prodPrice').value);
let stock=parseInt(document.getElementById('prodStock').value);
let imageURL=document.getElementById('prodImageURL').value.trim();
if(!name||!category||isNaN(price)||isNaN(stock)||!imageURL){alert('Fill all fields');return;}
let newProduct={id:products.length?Math.max(...products.map(p=>p.id))+1:1,name,category,price,stock,imageURL,vendorId:currentVendor.id};
products.push(newProduct);localStorage.setItem('products',JSON.stringify(products));renderProducts();resetForm();}

function editProduct(i){let p=products[i];document.getElementById('prodName').value=p.name;document.getElementById('prodCategory').value=p.category;document.getElementById('prodPrice').value=p.price;document.getElementById('prodStock').value=p.stock;document.getElementById('prodImageURL').value=p.imageURL;document.querySelector('.update').style.display='inline-block';document.querySelector('.cancel').style.display='inline-block';document.querySelector('.add').style.display='none';document.getElementById('editProductId').value=i;}

function updateProduct(){let i=parseInt(document.getElementById('editProductId').value);let p=products[i];p.name=document.getElementById('prodName').value;p.category=document.getElementById('prodCategory').value;p.price=parseFloat(document.getElementById('prodPrice').value);p.stock=parseInt(document.getElementById('prodStock').value);p.imageURL=document.getElementById('prodImageURL').value;localStorage.setItem('products',JSON.stringify(products));renderProducts();resetForm();}

function resetForm(){document.getElementById('prodName').value='';document.getElementById('prodCategory').value='';document.getElementById('prodPrice').value='';document.getElementById('prodStock').value='';document.getElementById('prodImageURL').value='';document.querySelector('.update').style.display='none';document.querySelector('.cancel').style.display='none';document.querySelector('.add').style.display='inline-block';}

function deleteProduct(i){if(confirm('Delete this product?')){products.splice(i,1);localStorage.setItem('products',JSON.stringify(products));renderProducts();}}

function renderVendorOrders(){
let list=document.getElementById('vendorOrderList');list.innerHTML='';
orders.forEach(o=>{
let vendorItems=o.products.filter(p=>products.find(mp=>mp.id===p.id&&mp.vendorId===currentVendor.id));
if(vendorItems.length){
let div=document.createElement('div');div.style.border='1px solid #007bff';div.style.background='#fff';div.style.width='280px';div.style.padding='0.5em';
let str=vendorItems.map(p=>`${p.name} x${p.quantity}`).join(', ');
div.innerHTML=`<p>Order ID: ${o.id}</p><p>Customer: ${o.customerName}</p><p>Your Items: ${str}</p><p>Total: $${vendorItems.reduce((s,p)=>s+p.price*p.quantity,0)}</p>`;
list.appendChild(div);
}
});}
</script>
</body>
</html>
