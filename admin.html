<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel</title>
<style>
body{font-family:Arial,sans-serif;background:#f9f9f9;color:#333;padding:20px;}
h1,h2{text-align:center;}
input,select,button{padding:0.5em;margin:0.3em 0;width:90%;border-radius:5px;border:1px solid #ccc;}
button{background:#007bff;color:white;border:none;cursor:pointer;transition:0.3s;}
button:hover{background:#0056b3;}
.section{border:1px solid #ccc;padding:15px;margin:10px;border-radius:8px;background:#fff;}
.product-item{border:1px solid #28a745;padding:10px;margin:5px;border-radius:8px;background:#e9ffe9;}
.review-item{border:1px solid #ff9800;padding:10px;margin:5px;border-radius:8px;background:#fff3e0;}
</style>
</head>
<body>

<h1>Admin Panel</h1>

<h2>Login</h2>
<input type="password" id="adminPass" placeholder="Enter Admin Password">
<button onclick="adminLogin()">Login</button>
<p id="loginMsg" style="color:red;"></p>

<div id="adminPanel" style="display:none;">

<h2>Pending Products</h2>
<div class="section" id="pendingProducts"></div>

<h2>Manage Products</h2>
<div class="section" id="allProducts"></div>

<h2>Customer Reviews</h2>
<div class="section" id="reviewsList"></div>

<h2>Theme / Color Settings</h2>
<div class="section">
<label>Background Color:</label>
<input type="color" id="bgColor">
<label>Text Color:</label>
<input type="color" id="textColor">
<label>Button Color:</label>
<input type="color" id="btnColor">
<label>Button Text Color:</label>
<input type="color" id="btnTextColor">
<button onclick="applyTheme()">Apply Theme</button>
</div>

</div>

<script>
const ADMIN_PASS = "NAFIS128";
let pending = JSON.parse(localStorage.getItem("pending")||'[]');
let products = JSON.parse(localStorage.getItem("products")||'[]');
let reviews = JSON.parse(localStorage.getItem("reviews")||[]);

function adminLogin(){
  let pass=document.getElementById('adminPass').value;
  if(pass===ADMIN_PASS){
    document.getElementById('adminPanel').style.display='block';
    document.getElementById('loginMsg').innerText='';
    renderPending();
    renderProducts();
    renderReviews();
  } else { document.getElementById('loginMsg').innerText="Wrong password"; }
}

// Pending products
function renderPending(){
  const list = document.getElementById('pendingProducts');
  list.innerHTML='';
  pending.forEach((p,i)=>{
    const div=document.createElement('div'); div.className='product-item';
    div.innerHTML=`<strong>${p.name}</strong> - $${p.price} - Stock: ${p.stock} 
      <button onclick="approveProduct(${i})">Approve</button>
      <button onclick="rejectProduct(${i})">Reject</button>`;
    list.appendChild(div);
  });
}

function approveProduct(i){
  pending[i].approved=true;
  products.push(pending[i]);
  pending.splice(i,1);
  saveData();
  renderPending();
  renderProducts();
}

function rejectProduct(i){
  pending.splice(i,1);
  saveData();
  renderPending();
}

// All products
function renderProducts(){
  const list = document.getElementById('allProducts');
  list.innerHTML='';
  products.forEach((p,i)=>{
    const div=document.createElement('div'); div.className='product-item';
    div.innerHTML=`<strong>${p.name}</strong> - $<input type="number" value="${p.price}" onchange="updatePrice(${i},this.value)"> 
      - Stock: <input type="number" value="${p.stock}" onchange="updateStock(${i},this.value)">
      <button onclick="deleteProduct(${i})">Delete</button>`;
    list.appendChild(div);
  });
}

function updatePrice(i,val){ products[i].price=Number(val); saveData(); }
function updateStock(i,val){ products[i].stock=Number(val); saveData(); }
function deleteProduct(i){ products.splice(i,1); saveData(); renderProducts(); }

// Reviews
function renderReviews(){
  const list = document.getElementById('reviewsList');
  list.innerHTML='';
  reviews.forEach((r,i)=>{
    const div=document.createElement('div'); div.className='review-item';
    div.innerHTML=`<strong>${r.product}</strong> - ${r.user}: ${r.comment} 
      <button onclick="deleteReview(${i})">Delete</button>`;
    list.appendChild(div);
  });
}

function deleteReview(i){ reviews.splice(i,1); saveData(); renderReviews(); }

// Theme
function applyTheme(){
  const bg=document.getElementById('bgColor').value;
  const text=document.getElementById('textColor').value;
  const btn=document.getElementById('btnColor').value;
  const btnText=document.getElementById('btnTextColor').value;
  document.body.style.background=bg;
  document.body.style.color=text;
  document.querySelectorAll('button').forEach(b=>{
    b.style.background=btn;
    b.style.color=btnText;
  });
}

// Save to localStorage
function saveData(){
  localStorage.setItem("pending",JSON.stringify(pending));
  localStorage.setItem("products",JSON.stringify(products));
  localStorage.setItem("reviews",JSON.stringify(reviews));
}
</script>
</body>
</html>
