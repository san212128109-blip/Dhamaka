<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dhamaka All-in-One System</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:Arial,sans-serif;background:#f8f9fa;color:#333;transition:0.3s;}
body.dark{background:#121212;color:#ddd;}
header{background:#28a745;color:white;padding:1em;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:10;}
header h1{margin:0;font-size:1.5em;}
nav a{color:white;margin-left:1em;text-decoration:none;font-weight:bold;transition:0.3s;}
nav a:hover{text-decoration:underline;color:#ffc107;}
.page{display:none;padding:1em;}
.product-list,.vendor-list,.review-list,.order-list{display:flex;flex-wrap:wrap;gap:1em;justify-content:center;margin-top:1em;}
.product,.vendor,.review,.order{border:1px solid #28a745;border-radius:12px;padding:1em;width:250px;text-align:center;background:#fff;box-shadow:2px2px10px rgba(0,0,0,0.1);transition:0.3s;position:relative;overflow:hidden;}
.product:hover,.vendor:hover,.review:hover,.order:hover{transform:scale(1.05);box-shadow:4px4px15px rgba(0,0,0,0.2);}
button{background:#28a745;color:white;border:none;padding:0.5em 1em;border-radius:5px;cursor:pointer;margin-top:0.5em;transition:0.3s;}
button:hover{background:#218838;}
input,select{padding:0.5em;margin:0.3em 0;width:90%;border-radius:5px;border:1px solid #ccc;}
#support{position:fixed;bottom:20px;right:20px;background:#25D366;color:white;padding:10px 15px;border-radius:50px;cursor:pointer;box-shadow:2px2px10px rgba(0,0,0,0.2);}
</style>
</head>
<body>

<header>
<h1>Dhamaka System</h1>
<nav>
<a href="#admin" onclick="showPage('adminLogin')">Admin</a>
<a href="#vendor" onclick="showPage('vendorLogin')">Vendor</a>
<a href="#customer" onclick="showPage('customerLogin')">Customer</a>
<button onclick="toggleDarkMode()">ðŸŒ™</button>
</nav>
</header>

<!-- ===== Admin Login ===== -->
<div id="adminLogin" class="page">
<h2>Admin Login</h2>
<input type="password" id="adminPassword" placeholder="Enter Password">
<button onclick="adminLogin()">Login</button>
<p id="loginMsg" style="color:red"></p>
</div>

<!-- ===== Admin Panel ===== -->
<div id="adminPanel" class="page">
<h2>Admin Panel</h2>
<div>
<label>Background: <input type="color" id="bgColor" onchange="applyTheme()"></label>
<label>Text: <input type="color" id="textColor" onchange="applyTheme()"></label>
<label>Button: <input type="color" id="btnColor" onchange="applyTheme()"></label>
<label>Button Text: <input type="color" id="btnTextColor" onchange="applyTheme()"></label>
</div>
<h3>Products</h3><div class="product-list" id="productList"></div>
<h3>Vendors</h3><div class="vendor-list" id="vendorList"></div>
<h3>Reviews</h3><div class="review-list" id="reviewList"></div>
<h3>Orders</h3><div class="order-list" id="orderList"></div>
</div>

<!-- ===== Vendor Login/Dashboard ===== -->
<div id="vendorLogin" class="page">
<h2>Vendor Login / Sign-Up</h2>
<input type="text" id="vendorUsername" placeholder="Username">
<input type="text" id="vendorWhatsapp" placeholder="WhatsApp Number">
<input type="password" id="vendorPassword" placeholder="Password">
<button onclick="vendorSignIn()">Sign In / Login</button>
<p id="vendorMsg" style="color:red"></p>
</div>
<div id="vendorPanel" class="page">
<h2>Welcome, <span id="vendorName"></span></h2>
<button onclick="vendorLogout()">Logout</button>
<h3>Add Product</h3>
<input type="text" id="prodName" placeholder="Product Name">
<input type="text" id="prodCategory" placeholder="Category">
<input type="number" id="prodPrice" placeholder="Price">
<input type="number" id="prodStock" placeholder="Stock">
<input type="text" id="prodImage" placeholder="Image URL">
<button onclick="addProduct()">Add Product</button>
<h3>My Products</h3><div class="product-list" id="vendorProductList"></div>
</div>

<!-- ===== Customer Login / Checkout ===== -->
<div id="customerLogin" class="page">
<h2>Customer Login / Sign-Up</h2>
<input type="text" id="customerName" placeholder="Name">
<input type="text" id="customerWhatsapp" placeholder="WhatsApp Number">
<button onclick="customerSignIn()">Login / Sign-Up</button>
<p id="customerMsg" style="color:red"></p>
</div>
<div id="customerPanel" class="page">
<h2>Welcome, <span id="customerDisplay"></span></h2>
<button onclick="customerLogout()">Logout</button>
<h3>Products</h3>
<div class="product-list" id="customerProductList"></div>
<h3>Cart</h3>
<div class="order-list" id="cartList"></div>
<button onclick="checkout()">Checkout</button>
</div>

<div id="support" onclick="openWhatsApp()">ðŸ’¬ Support</div>

<script>
// ===== LocalStorage Data =====
let adminLoggedIn=false;
let vendors=JSON.parse(localStorage.getItem('vendors')||'[]');
let products=JSON.parse(localStorage.getItem('products')||'[]');
let reviews=JSON.parse(localStorage.getItem('reviews')||'[]');
let orders=JSON.parse(localStorage.getItem('orders')||'[]');
let currentVendor=JSON.parse(localStorage.getItem('currentVendor')||'null');
let currentCustomer=JSON.parse(localStorage.getItem('currentCustomer')||'null');
let cart=[];

function showPage(page){
  document.querySelectorAll('.page').forEach(p=>p.style.display='none');
  document.getElementById(page).style.display='block';
  renderAll();
}

showPage('adminLogin');

// ===== Admin =====
function adminLogin(){
  if(document.getElementById('adminPassword').value==='NAFIS128'){
    adminLoggedIn=true;
    showPage('adminPanel');
  }else document.getElementById('loginMsg').innerText='Wrong Password';
}
function toggleDarkMode(){document.body.classList.toggle('dark');}
function applyTheme(){
  document.body.style.background=document.getElementById('bgColor').value;
  document.body.style.color=document.getElementById('textColor').value;
  document.querySelectorAll('button').forEach(b=>{b.style.background=document.getElementById('btnColor').value;b.style.color=document.getElementById('btnTextColor').value;});
}

function renderAll(){
  renderProducts(); renderVendors(); renderReviews(); renderOrders(); renderVendorProducts(); renderCustomerProducts(); renderCart();
}

// ===== Products =====
function renderProducts(){
  let list=document.getElementById('productList'); list.innerHTML='';
  products.forEach((p,i)=>{
    let div=document.createElement('div'); div.className='product';
    div.innerHTML=`<h3>${p.name}</h3><p>Category: ${p.category}</p><p>Price: $${p.price}</p><p>Stock: ${p.stock}</p><p>Image: ${p.image}</p><button onclick='deleteProduct(${i})'>Delete</button>`;
    list.appendChild(div);
  });
}
function deleteProduct(i){products.splice(i,1); localStorage.setItem('products',JSON.stringify(products)); renderAll();}

// ===== Vendors =====
function vendorSignIn(){
  let u=document.getElementById('vendorUsername').value.trim();
  let w=document.getElementById('vendorWhatsapp').value.trim();
  let p=document.getElementById('vendorPassword').value.trim();
  if(!u||!w||!p){document.getElementById('vendorMsg').innerText='Fill all fields'; return;}
  let v=vendors.find(v=>v.username===u);
  if(v){
    if(v.password===p){currentVendor=v; localStorage.setItem('currentVendor',JSON.stringify(v)); showPage('vendorPanel');}
    else document.getElementById('vendorMsg').innerText='Wrong password';
  }else{
    let newV={username:u, whatsapp:w, password:p, status:'Pending', id:'v'+Date.now()};
    vendors.push(newV); localStorage.setItem('vendors',JSON.stringify(vendors)); currentVendor=newV; localStorage.setItem('currentVendor',JSON.stringify(newV)); showPage('vendorPanel');
  }
  document.getElementById('vendorName').innerText=currentVendor.username;
}
function vendorLogout(){currentVendor=null; localStorage.removeItem('currentVendor'); showPage('vendorLogin');}
function renderVendorProducts(){
  let list=document.getElementById('vendorProductList'); list.innerHTML='';
  if(!currentVendor) return;
  products.forEach((p,i)=>{if(p.vendorId===currentVendor.id){
    let div=document.createElement('div'); div.className='product';
    div.innerHTML=`<h3>${p.name}</h3><p>Category:${p.category}</p><p>Price:$${p.price}</p><p>Stock:${p.stock}</p><button onclick='deleteProduct(${i})'>Delete</button>`;
    list.appendChild(div);
  }});
}
function addProduct(){
  let n=document.getElementById('prodName').value.trim();
  let c=document.getElementById('prodCategory').value.trim();
  let pr=parseFloat(document.getElementById('prodPrice').value);
  let s=parseInt(document.getElementById('prodStock').value);
  let img=document.getElementById('prodImage').value.trim();
  if(!n||!c||isNaN(pr)||isNaN(s)){alert('Fill all fields'); return;}
  let newP={name:n,category:c,price:pr,stock:s,image:img,vendorId:currentVendor.id};
  products.push(newP); localStorage.setItem('products',JSON.stringify(products)); renderAll();
}

// ===== Customers =====
function customerSignIn(){
  let n=document.getElementById('customerName').value.trim();
  let w=document.getElementById('customerWhatsapp').value.trim();
  if(!n||!w){document.getElementById('customerMsg').innerText='Fill all fields'; return;}
  currentCustomer={name:n, whatsapp:w}; localStorage.setItem('currentCustomer',JSON.stringify(currentCustomer)); showPage('customerPanel');
  document.getElementById('customerDisplay').innerText=n;
}
function customerLogout(){currentCustomer=null; localStorage.removeItem('currentCustomer'); cart=[]; showPage('customerLogin');}
function renderCustomerProducts(){
  let list=document.getElementById('customerProductList'); list.innerHTML='';
  products.forEach((p,i)=>{
    let div=document.createElement('div'); div.className='product';
    div.innerHTML=`<h3>${p.name}</h3><p>Price: $${p.price}</p><button onclick='addToCart(${i})'>Add to Cart</button>`;
    list.appendChild(div);
  });
}
function addToCart(i){cart.push(products[i]); renderCart();}
function renderCart(){
  let list=document.getElementById('cartList'); list.innerHTML='';
  let total=0;
  cart.forEach((p,i)=>{total+=p.price; let div=document.createElement('div'); div.className='order'; div.innerHTML=`<p>${p.name} - $${p.price}</p><button onclick='removeFromCart(${i})'>Remove</button>`; list.appendChild(div);});
}
function removeFromCart(i){cart.splice(i,1); renderCart();}
function checkout(){
  if(!currentCustomer || cart.length===0){alert('Add products first'); return;}
  let total=cart.reduce((sum,p)=>sum+p.price,0);
  orders.push({customerName:currentCustomer.name, customerWhatsapp:currentCustomer.whatsapp, products:cart, total:total});
  localStorage.setItem('orders',JSON.stringify(orders)); cart=[]; renderCart(); alert('Order placed'); renderOrders();
}

// ===== Admin Render =====
function renderVendors(){
  let list=document.getElementById('vendorList'); list.innerHTML='';
  vendors.forEach((v,i)=>{let div=document.createElement('div'); div.className='vendor'; div.innerHTML=`<h3>${v.username}</h3><p>Status:${v.status}</p><p>WhatsApp:${v.whatsapp}</p><button onclick='approveVendor(${i})'>Approve</button><button onclick='denyVendor(${i})'>Deny</button>`; list.appendChild(div);});
}
function approveVendor(i){vendors[i].status='Approved'; localStorage.setItem('vendors',JSON.stringify(vendors)); renderAll();}
function denyVendor(i){vendors[i].status='Denied'; localStorage.setItem('vendors',JSON.stringify(vendors)); renderAll();}

function renderReviews(){
  let list=document.getElementById('reviewList'); list.innerHTML='';
  reviews.forEach((r,i)=>{let div=document.createElement('div'); div.className='review'; div.innerHTML=`<p>${r.customer}: ${r.text}</p><button onclick='deleteReview(${i})'>Delete</button>`; list.appendChild(div);});
}
function deleteReview(i){reviews.splice(i,1); localStorage.setItem('reviews',JSON.stringify(reviews)); renderAll();}

function renderOrders(){
  let list=document.getElementById('orderList'); list.innerHTML='';
  orders.forEach((o,i)=>{let div=document.createElement('div'); div.className='order'; let prodStr=o.products.map(p=>p.name+' ($'+p.price+')').join(', ');
  div.innerHTML=`<p><b>${o.customerName}</b> (${o.customerWhatsapp})</p><p>Products: ${prodStr}</p><p>Total: $${o.total}</p><button onclick='deleteOrder(${i})'>Delete</button>`; list.appendChild(div);});
}
function deleteOrder(i){orders.splice(i,1); localStorage.setItem('orders',JSON.stringify(orders)); renderAll();}

function openWhatsApp(){window.open('https://wa.me/01913821910','_blank');}

</script>

</body>
</html>
