<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dhamaka Admin Panel</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:Arial,sans-serif;background:#f8f9fa;color:#333;transition:0.3s;}
body.dark{background:#121212;color:#ddd;}
header{background:#28a745;color:white;padding:1em;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:10;flex-wrap:wrap;}
header h1{margin:0;font-size:1.5em;}
nav a{color:white;margin-left:1em;text-decoration:none;font-weight:bold;transition:0.3s;}
nav a:hover{text-decoration:underline;color:#ffc107;}
nav button{margin-left:1em;cursor:pointer;}
.page{display:none;padding:1em;}
h2,h3{margin-bottom:0.5em;text-align:center;}
.product-list,.vendor-list,.review-list,.order-list{display:flex;flex-wrap:wrap;gap:1em;justify-content:center;margin-top:1em;}
.product,.vendor,.review,.order{border:1px solid #28a745;border-radius:12px;padding:1em;width:280px;text-align:center;background:#fff;box-shadow:2px2px10px rgba(0,0,0,0.1);transition:0.3s;position:relative;overflow:hidden;}
.product:hover,.vendor:hover,.review:hover,.order:hover{transform:scale(1.05);box-shadow:4px4px15px rgba(0,0,0,0.2);}
.product img{width:100px;height:100px;object-fit:cover;margin-bottom:10px;border-radius:8px;}
button{background:#28a745;color:white;border:none;padding:0.5em 1em;border-radius:5px;cursor:pointer;margin-top:0.5em;transition:0.3s;}
button:hover{background:#218838;}
input,select{padding:0.5em;margin:0.3em 0;width:90%;border-radius:5px;border:1px solid #ccc;}
.order-status-Pending{color:orange;font-weight:bold;}
.order-status-Shipped{color:blue;font-weight:bold;}
.order-status-Delivered{color:green;font-weight:bold;}
.edit-input{width:45%;margin:0.2em 2%;padding:0.3em;}
#themeCustomizer{max-width:400px;margin:1em auto;padding:1em;border:1px solid #ccc;border-radius:8px;}
</style>
</head>
<body>

<header>
<h1>Dhamaka Admin Panel</h1>
<nav>
<a href="#dashboard" onclick="showPage('dashboard')">Dashboard</a>
<a href="#products" onclick="showPage('products')">Products</a>
<a href="#reviews" onclick="showPage('reviews')">Reviews</a>
<a href="#orders" onclick="showPage('orders')">Orders</a>
<a href="#vendors" onclick="showPage('vendors')">Vendors</a>
<a href="#" onclick="alert('WhatsApp Support: 01913821910')">Support</a>
<button onclick="toggleDarkMode()">ðŸŒ™</button>
</nav>
</header>

<!-- LOGIN PAGE -->
<div id="loginPage" class="page">
<h2>Admin Login</h2>
<input type="text" id="adminUser" placeholder="User ID">
<input type="password" id="adminPassword" placeholder="Password">
<button onclick="adminLogin()">Login</button>
<p id="loginMsg" style="color:red"></p>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="page">
<h2>Dashboard</h2>
<p>Welcome, Admin!</p>
<h3>Theme Customization</h3>
<div id="themeCustomizer">
<label style="display:block;">Background Color: <input type="color" id="bgColor" onchange="applyTheme()"></label>
<label style="display:block;">Text Color: <input type="color" id="textColor" onchange="applyTheme()"></label>
<label style="display:block;">Button Color: <input type="color" id="btnColor" onchange="applyTheme()"></label>
<label style="display:block;">Button Text Color: <input type="color" id="btnTextColor" onchange="applyTheme()"></label>
</div>
</div>

<!-- PRODUCTS PAGE -->
<div id="products" class="page">
<h2>Products Management</h2>
<div id="addProductContainer">
<h3>Add New Product</h3>
<input type="text" id="pName" placeholder="Product Name">
<select id="pCategory">
<option value="Electronics">Electronics</option>
<option value="Apparel">Apparel</option>
<option value="Furniture">Furniture</option>
<option value="Groceries">Groceries</option>
<option value="Other">Other</option>
</select>
<input type="number" id="pPrice" placeholder="Price">
<input type="number" id="pStock" placeholder="Stock">
<input type="text" id="pBadge" placeholder="Badge (Optional)">
<input type="url" id="pImageURL" placeholder="Image URL">
<button onclick="addProduct()">Add Product</button>
</div>
<div class="product-list" id="productList"></div>
</div>

<!-- REVIEWS PAGE -->
<div id="reviews" class="page">
<h2>Customer Reviews</h2>
<div class="review-list" id="reviewList"></div>
</div>

<!-- ORDERS PAGE -->
<div id="orders" class="page">
<h2>Orders</h2>
<div style="text-align:center;margin-bottom:1em;">
<select id="orderStatusFilter" onchange="renderOrders()">
<option value="All">Filter by Status</option>
<option value="Pending">Pending</option>
<option value="Shipped">Shipped</option>
<option value="Delivered">Delivered</option>
</select>
</div>
<div class="order-list" id="orderList"></div>
</div>

<!-- VENDORS PAGE -->
<div id="vendors" class="page">
<h2>Vendors</h2>
<div class="vendor-list" id="vendorList"></div>
</div>

<script>
// --- GLOBAL STATE ---
let adminLoggedIn=false;
let products=JSON.parse(localStorage.getItem('products')||'[]');
let reviews=JSON.parse(localStorage.getItem('reviews')||'[]');
let orders=JSON.parse(localStorage.getItem('orders')||'[]');
let vendors=JSON.parse(localStorage.getItem('vendors')||'[]');

if(vendors.length===0){
    vendors.push({id:'vendor1',password:'1234',name:'Vendor One',status:'Approved'});
    vendors.push({id:'vendor2',password:'1234',name:'Vendor Two',status:'Pending'});
    localStorage.setItem('vendors',JSON.stringify(vendors));
}

// --- PAGE CONTROL ---
function reloadData(){products=JSON.parse(localStorage.getItem('products')||'[]');reviews=JSON.parse(localStorage.getItem('reviews')||'[]');orders=JSON.parse(localStorage.getItem('orders')||'[]');vendors=JSON.parse(localStorage.getItem('vendors')||'[]');}
function showPage(page){if(!adminLoggedIn && page!=='loginPage'){alert('Login required'); return;} document.querySelectorAll('.page').forEach(p=>p.style.display='none'); document.getElementById(page).style.display='block'; reloadData(); renderAll();}
showPage('loginPage');

function adminLogin(){
    let user=document.getElementById('adminUser').value.trim();
    let pass=document.getElementById('adminPassword').value.trim();
    if(user==='Nafis' && pass==='nafis128'){adminLoggedIn=true; showPage('dashboard');}
    else{document.getElementById('loginMsg').innerText='Invalid credentials';}
}

function toggleDarkMode(){document.body.classList.toggle('dark');}
function applyTheme(){
    document.body.style.background=document.getElementById('bgColor').value;
    document.body.style.color=document.getElementById('textColor').value;
    document.querySelectorAll('button').forEach(b=>{b.style.background=document.getElementById('btnColor').value;b.style.color=document.getElementById('btnTextColor').value;});
}
function renderAll(){renderProducts();renderReviews();renderOrders();renderVendors();}

// --- PRODUCTS ---
function generateProductId(){products=JSON.parse(localStorage.getItem('products')||'[]');return products.length>0?Math.max(...products.map(p=>p.id))+1:1;}
function addProduct(){
    const name=document.getElementById('pName').value.trim();
    const category=document.getElementById('pCategory').value;
    const price=Number(document.getElementById('pPrice').value);
    const stock=Number(document.getElementById('pStock').value);
    const badge=document.getElementById('pBadge').value||null;
    const imageURL=document.getElementById('pImageURL').value.trim();
    if(!name||!price||!stock||!imageURL||price<=0||stock<0){alert('Provide valid info'); return;}
    let newProduct={id:generateProductId(),name,category,price,stock,rating:5,badge,imageURL,vendorId:'admin'};
    products.push(newProduct);
    localStorage.setItem('products',JSON.stringify(products));
    document.getElementById('pName').value='';document.getElementById('pPrice').value='';document.getElementById('pStock').value='';document.getElementById('pBadge').value='';document.getElementById('pImageURL').value='';
    renderProducts();
}
function renderProducts(){
    products=JSON.parse(localStorage.getItem('products')||'[]');
    let list=document.getElementById('productList'); list.innerHTML='';
    if(products.length===0){list.innerHTML='<p>No products</p>';return;}
    products.forEach((p,i)=>{
        let div=document.createElement('div'); div.className='product';
        let imageUrl=p.imageURL||'https://via.placeholder.com/100?text=No+Image';
        div.innerHTML=`<img src="${imageUrl}" alt="${p.name}"><h3>${p.name} (ID:${p.id})</h3><p>Category:${p.category}</p><p>Vendor:${p.vendorId}</p><p>Price:$${p.price.toFixed(2)}</p><p>Stock:${p.stock}</p>
        <input type="number" id="priceEdit${p.id}" value="${p.price}" class="edit-input" placeholder="New Price">
        <input type="number" id="stockEdit${p.id}" value="${p.stock}" class="edit-input" placeholder="New Stock">
        <button onclick="editProduct(${p.id})">Update Price/Stock</button>
        <button onclick="deleteProduct(${i})" style="background:red;">Delete</button>`;
        list.appendChild(div);
    });
}
function editProduct(id){
    const newPrice=Number(document.getElementById(`priceEdit${id}`).value);
    const newStock=Number(document.getElementById(`stockEdit${id}`).value);
    if(isNaN(newPrice)||newPrice<=0||isNaN(newStock)||newStock<0){alert('Provide valid values'); return;}
    products=JSON.parse(localStorage.getItem('products')||'[]');
    const index=products.findIndex(p=>p.id===id);
    if(index!==-1){products[index].price=newPrice;products[index].stock=newStock;localStorage.setItem('products',JSON.stringify(products));renderProducts();}
}
function deleteProduct(i){products=JSON.parse(localStorage.getItem('products')||'[]');if(confirm(`Delete ${products[i].name}?`)){products.splice(i,1);localStorage.setItem('products',JSON.stringify(products));renderProducts();}}

// --- REVIEWS ---
function renderReviews(){reviews=JSON.parse(localStorage.getItem('reviews')||'[]');let list=document.getElementById('reviewList');list.innerHTML='';if(reviews.length===0){list.innerHTML='<p>No reviews</p>';return;}reviews.forEach((r,i)=>{let div=document.createElement('div');div.className='review';div.innerHTML=`<p><b>${r.name||r.customer}</b>: ${r.text}</p><button onclick="deleteReview(${i})" style="background:red;">Delete</button>`;list.appendChild(div);});}
function deleteReview(i){reviews=JSON.parse(localStorage.getItem('reviews')||'[]');reviews.splice(i,1);localStorage.setItem('reviews',JSON.stringify(reviews));renderReviews();}

// --- ORDERS ---
function renderOrders(){
orders=JSON.parse(localStorage.getItem('orders')||'[]');let list=document.getElementById('orderList');list.innerHTML='';
const filterStatus=document.getElementById('orderStatusFilter').value;let filteredOrders=orders;if(filterStatus!=='All'){filteredOrders=orders.filter(o=>o.status===filterStatus);}
if(filteredOrders.length===0){list.innerHTML='<p>No orders</p>';return;}
filteredOrders.forEach((o,i)=>{
const originalIndex=orders.findIndex(item=>item.id===o.id);
let productsStr=o.products.map(p=>`${p.name} (x${p.quantity})`).join(', ');
let statusClass=`order-status-${o.status}`;
let div=document.createElement('div'); div.className='order';
div.innerHTML=`<p><b>Order ID:</b>${o.id}</p><p><b>Customer:</b>${o.customerName}</p><p><b>WhatsApp:</b>${o.customerWhatsapp}</p><p><b>Address:</b>${o.customerAddress}</p><p><b>Products:</b>${productsStr}</p><p><b>Total:</b>$${o.total}</p><p><b>Date:</b>${o.date}</p><p><b>Status:</b><span class="${statusClass}">${o.status}</span></p>
<select onchange="updateOrderStatus(${originalIndex},this.value)">
<option value="${o.status}">${o.status} (Select New)</option>
<option value="Pending">Pending</option>
<option value="Shipped">Shipped</option>
<option value="Delivered">Delivered</option>
</select>
<button onclick="deleteOrder(${originalIndex})" style="background:red;">Delete Order</button>`;
list.appendChild(div);
});
}
function updateOrderStatus(i,newStatus){orders=JSON.parse(localStorage.getItem('orders')||'[]');if(orders[i].status===newStatus)return;orders[i].status=newStatus;localStorage.setItem('orders',JSON.stringify(orders));renderOrders();}
function deleteOrder(i){orders=JSON.parse(localStorage.getItem('orders')||'[]');if(confirm(`Delete Order ID ${orders[i].id}?`)){orders.splice(i,1);localStorage.setItem('orders',JSON.stringify(orders));renderOrders();}}

// --- VENDORS ---
function renderVendors(){
vendors=JSON.parse(localStorage.getItem('vendors')||'[]');
let list=document.getElementById('vendorList');list.innerHTML='';
if(vendors.length===0){list.innerHTML='<p>No vendors</p>';return;}
vendors.forEach((v,i)=>{
let div=document.createElement('div');div.className='vendor';
div.innerHTML=`<h3>${v.name}</h3><p>ID: ${v.id}</p><p>Status: ${v.status}</p>
<button onclick="approveVendor(${i})" style="background:green;">Approve</button>
<button onclick="rejectVendor(${i})" style="background:red;">Reject</button>`;
list.appendChild(div);
});
}
function approveVendor(i){vendors=JSON.parse(localStorage.getItem('vendors')||'[]');vendors[i].status='Approved';localStorage.setItem('vendors',JSON.stringify(vendors));renderVendors();}
function rejectVendor(i){vendors=JSON.parse(localStorage.getItem('vendors')||'[]');vendors[i].status='Rejected';localStorage.setItem('vendors',JSON.stringify(vendors));renderVendors();}
</script>
</body>
</html>
