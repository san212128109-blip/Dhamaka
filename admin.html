<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dhamaka Admin Panel</title>
<style>
body{font-family:Arial,sans-serif;background:#f4f4f4;color:#333;transition:0.3s;}
body.dark{background:#121212;color:#ddd;}
h1,h2{text-align:center;}
.container{width:90%;max-width:800px;margin:1em auto;}
input,select,button{padding:0.5em;margin:0.3em 0;width:100%;border-radius:5px;border:1px solid #ccc;}
button{cursor:pointer;background:#28a745;color:white;border:none;}
button:hover{background:#218838;}
.product{border:1px solid #28a745;padding:1em;margin:0.5em 0;border-radius:10px;background:#fff;}
</style>
</head>
<body>
<h1>Admin Panel</h1>

<div class="container">
<h2>Admin Login</h2>
<input type="password" id="adminPass" placeholder="Enter Admin Password">
<button onclick="adminLogin()">Login</button>
<p id="loginMsg" style="color:red;"></p>
</div>

<div class="container" id="adminPanel" style="display:none;">
<h2>Theme Customization</h2>
<label>Background Color:</label>
<input type="color" id="bgColor">
<label>Text Color:</label>
<input type="color" id="textColor">
<label>Button Color:</label>
<input type="color" id="btnColor">
<label>Button Text Color:</label>
<input type="color" id="btnTextColor">
<button onclick="saveTheme()">Save Theme</button>

<hr>

<h2>Product Management</h2>
<div id="productList"></div>

<hr>

<h2>Orders</h2>
<div id="orderList"></div>
</div>

<script>
let adminPassword = "NAFIS128";
let products = JSON.parse(localStorage.getItem("products")||'[]');
let pending = JSON.parse(localStorage.getItem("pending")||'[]');
let orders = JSON.parse(localStorage.getItem("orders")||'[]');
let theme = JSON.parse(localStorage.getItem("theme")||'{}');

function adminLogin(){
  let pass = document.getElementById("adminPass").value;
  if(pass === adminPassword){
    document.getElementById("adminPanel").style.display="block";
    document.getElementById("loginMsg").innerText="";
    loadTheme();
    renderProducts();
    renderOrders();
  } else {
    document.getElementById("loginMsg").innerText="Wrong password!";
  }
}

// ===== Theme =====
function loadTheme(){
  if(theme.bg) document.body.style.background = theme.bg;
  if(theme.text) document.body.style.color = theme.text;
  if(theme.btn) document.querySelectorAll('button').forEach(b=>b.style.background=theme.btn);
  if(theme.btnText) document.querySelectorAll('button').forEach(b=>b.style.color=theme.btnText);
  document.getElementById("bgColor").value = theme.bg||"#f4f4f4";
  document.getElementById("textColor").value = theme.text||"#333333";
  document.getElementById("btnColor").value = theme.btn||"#28a745";
  document.getElementById("btnTextColor").value = theme.btnText||"#ffffff";
}
function saveTheme(){
  theme.bg = document.getElementById("bgColor").value;
  theme.text = document.getElementById("textColor").value;
  theme.btn = document.getElementById("btnColor").value;
  theme.btnText = document.getElementById("btnTextColor").value;
  localStorage.setItem("theme",JSON.stringify(theme));
  loadTheme();
  alert("Theme saved!");
}

// ===== Product Management =====
function renderProducts(){
  let list = document.getElementById("productList");
  list.innerHTML="";
  if(pending.length===0) list.innerHTML="<p>No pending products</p>";
  pending.forEach((p,i)=>{
    let div = document.createElement('div');
    div.className="product";
    div.innerHTML=`<strong>${p.name}</strong> - $${p.price}<br>Category: ${p.category}<br>
      <button onclick="approveProduct(${i})">Approve</button>
      <button onclick="editProduct(${i})">Edit</button>
      <button onclick="rejectProduct(${i})">Reject</button>`;
    list.appendChild(div);
  });
}

function approveProduct(i){
  products.push(pending[i]);
  pending.splice(i,1);
  localStorage.setItem("products",JSON.stringify(products));
  localStorage.setItem("pending",JSON.stringify(pending));
  renderProducts();
}

function rejectProduct(i){
  pending.splice(i,1);
  localStorage.setItem("pending",JSON.stringify(pending));
  renderProducts();
}

function editProduct(i){
  let p = pending[i];
  let newName = prompt("Edit Name:",p.name);
  let newPrice = prompt("Edit Price:",p.price);
  let newCategory = prompt("Edit Category:",p.category);
  if(newName) p.name=newName;
  if(newPrice) p.price=Number(newPrice);
  if(newCategory) p.category=newCategory;
  pending[i]=p;
  localStorage.setItem("pending",JSON.stringify(pending));
  renderProducts();
}

// ===== Orders =====
function renderOrders(){
  let list = document.getElementById("orderList");
  list.innerHTML="";
  if(orders.length===0) list.innerHTML="<p>No orders yet</p>";
  orders.forEach((o,i)=>{
    let div = document.createElement('div');
    div.className="product";
    div.innerHTML=`<strong>${o.customer}</strong> - Total: $${o.total} - Payment: ${o.payment}<br>
      <button onclick="completeOrder(${i})">${o.completed?"Completed":"Mark Complete"}</button>`;
    list.appendChild(div);
  });
}

function completeOrder(i){
  orders[i].completed = true;
  localStorage.setItem("orders",JSON.stringify(orders));
  renderOrders();
}

</script>
</body>
</html>
