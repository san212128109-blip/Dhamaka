<!-- admin.html -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel - Dhamaka</title>
<style>
body{font-family:Arial;background:#f9f9f9;padding:20px;}
.product{border:1px solid #aaa;padding:10px;margin:5px;border-radius:5px;background:white;transition:0.3s;}
.product:hover{box-shadow:2px2px10px rgba(0,0,0,0.2);}
button{padding:5px 10px;margin:4px;border:none;border-radius:4px;cursor:pointer;transition:0.3s;}
button:hover{opacity:0.9;}
button.delete{background:red;color:white;}
@media(max-width:600px){.product{width:100%;}}
</style>
</head>
<body>
<h2>Dhamaka Admin Panel</h2>
<div id="pendingArea"></div>
<hr>
<div id="approvedArea"></div>
<script>
let PENDING = JSON.parse(localStorage.getItem("dhamaka_pending_v2")||"[]");
let PRODUCTS = JSON.parse(localStorage.getItem("dhamaka_products_v2")||"[]");
let pass = prompt("Enter Admin Password:");
if(pass !== "NAFIS128"){ alert("Wrong password!"); throw new Error("Unauthorized"); }

function saveData(){
 localStorage.setItem("dhamaka_pending_v2",JSON.stringify(PENDING));
 localStorage.setItem("dhamaka_products_v2",JSON.stringify(PRODUCTS));
 renderAdmin();
}

function renderAdmin(){
 let html = "<h3>Pending Products</h3>";
 if(PENDING.length===0){ html+="<p>No pending items</p>"; }
 PENDING.forEach((p,i)=>{
 html+=`<div class='product'><b>${p.name}</b> - ${p.price} Tk<br>Vendor: ${p.vendor}<br>
<button onclick='approve(${i})'>Approve</button>
<button class='delete' onclick='delPending(${i})'>Delete</button></div>`;
 });
 document.getElementById("pendingArea").innerHTML = html;

 html = "<h3>Approved Products</h3>";
 if(PRODUCTS.length===0){ html+="<p>No approved products</p>"; }
 PRODUCTS.forEach((p,i)=>{
 html+=`<div class='product'><b>${p.name}</b> - ${p.price} Tk<br>Vendor: ${p.vendor}<br>
<button onclick='editApproved(${i})'>Edit Price</button>
<button class='delete' onclick='delApproved(${i})'>Delete</button></div>`;
 });
 document.getElementById("approvedArea").innerHTML = html;
}

function approve(i){ PRODUCTS.push(PENDING[i]); PENDING.splice(i,1); saveData(); }
function delPending(i){ PENDING.splice(i,1); saveData(); }
function editApproved(i){ let np = prompt("Enter new price", PRODUCTS[i].price); if(np){ PRODUCTS[i].price=np; saveData(); } }
function delApproved(i){ PRODUCTS.splice(i,1); saveData(); }

renderAdmin();
</script>
</body>
</html>
