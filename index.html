<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dhamaka Daily Items - Shop</title>
<style>
/* CSS: ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶™‡ßÅ‡¶∞‡ßã‡¶®‡ßã ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§ ‡¶Ü‡¶õ‡ßá */
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:Arial,sans-serif;background:#d4edda;color:#155724;transition:0.3s;}
body.dark{background:#121212;color:#ddd;}
header{background:#28a745;color:white;padding:1em;display:flex;justify-content:space-between;flex-wrap:wrap;align-items:center;position:sticky;top:0;z-index:10;}
header h1{margin:0;font-size:1.5em;}
nav{display:flex;align-items:center;flex-wrap:wrap;}
nav a{color:white;margin-left:1em;text-decoration:none;font-weight:bold;transition:0.3s;position:relative;}
nav a:hover{text-decoration:underline;color:#ffc107;}
nav #cartLink::after{content:attr(data-count);position:absolute;top:-10px;right:-10px;background:red;color:white;width:20px;height:20px;text-align:center;line-height:20px;border-radius:50%;font-size:0.8em;display:inline-block;}
nav button{margin-left:1em;cursor:pointer;}
.page{display:none;padding:1em;}
h1,h2,h3{text-align:center;margin-bottom:0.5em;}
.product-list,.cart-list{display:flex;flex-wrap:wrap;gap:1em;justify-content:center;margin-top:1em;}
.product{border:1px solid #28a745;border-radius:12px;padding:1em;width:200px;text-align:center;background:#fff;box-shadow:2px2px10px rgba(0,0,0,0.1);transition:0.3s;position:relative;overflow:hidden;}
.product:hover{transform:scale(1.05);box-shadow:4px4px15px rgba(0,0,0,0.2);}
.product img{transition: transform 0.3s;}
.product:hover img{transform:scale(1.2);}
.badge{position:absolute;top:10px;left:10px;background:#ffc107;color:#000;padding:2px 6px;border-radius:4px;font-size:0.8em;animation:bounce 1s infinite alternate;}
@keyframes bounce{0%{transform:translateY(0);}100%{transform:translateY(-5px);}}
button{background:#28a745;color:white;border:none;padding:0.5em 1em;border-radius:5px;cursor:pointer;margin-top:0.5em;transition:0.3s;}
button:hover{background:#218838;}
input,select{padding:0.5em;margin:0.3em 0;width:90%;border-radius:5px;border:1px solid #ccc;}
#cartSummary{text-align:center;margin-top:1em;font-weight:bold;}
.carousel{display:flex;overflow:hidden;width:90%;margin:1em auto;position:relative;border-radius:12px;}
.carousel img{width:100%;border-radius:12px;transition:transform 0.5s;}
.star{color:gold;font-size:1em;cursor:pointer;}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);justify-content:center;align-items:center;animation:fadeIn 0.3s;}
.modal-content{background:#fff;padding:1em;border-radius:12px;width:90%;max-width:400px;text-align:center;}
.modal button{width:45%;margin:0.5em;}
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
#loginForm{max-width:400px;margin:1em auto;text-align:center;}
#loginForm input{width:80%;margin-bottom:0.5em;}
#support{position:fixed;bottom:20px;right:20px;background:#25D366;color:white;padding:10px 15px;border-radius:50px;cursor:pointer;box-shadow:2px2px10px rgba(0,0,0,0.2);}
#reviewForm{max-width:400px;margin:1em auto;text-align:center;border:1px solid #ccc;padding:1em;border-radius:8px;}
#reviewForm input, #reviewForm textarea{width:90%;margin:0.3em 0;padding:0.5em;}
#reviewList{margin-top:1em;}
.product-image-container img {width: 150px; height: 150px; object-fit: cover; border-radius: 8px;} /* ‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
@media(max-width:600px){ .product{width:45%; } header{flex-direction:column;align-items:flex-start;} nav a{margin:0.3em 0;} }
</style>
</head>
<body>

<header>
<h1>Dhamaka Daily Items</h1>
<nav>
<a href="#home" onclick="showPage('home')">Home</a>
<a href="#categories" onclick="showPage('categories')">Categories</a>
<a id="cartLink" href="#cart" data-count="0" onclick="showPage('cart')">Cart</a>
<a href="admin.html" target="_blank">Admin Panel</a> <button onclick="toggleDarkMode()">üåô</button>
<button id="logoutBtn" style="display:none;" onclick="logout()">Logout</button>
</nav>
</header>

<div id="home" class="page">
<h2>Featured Products</h2>
<div class="carousel" id="carousel"></div>
<div class="product-list" id="homeList"></div>
</div>

<div id="categories" class="page">
<h2>Categories</h2>
<select id="categoryFilter" onchange="filterCategory()"><option value="All">All</option></select>
<input type="text" id="searchInput" placeholder="Search Products..." oninput="filterCategory()">
<select id="sortSelect" onchange="filterCategory()">
<option value="">Sort By</option>
<option value="price-asc">Price Low‚ÜíHigh</option>
<option value="price-desc">Price High‚ÜíLow</option>
<option value="name-asc">Name A‚ÜíZ</option>
<option value="name-desc">Name Z‚ÜíA</option>
</select>
<div class="product-list" id="categoryList"></div>
</div>

<div id="cart" class="page">
<h2>Your Cart</h2>
<div class="cart-list" id="cartList"></div>
<div id="cartSummary"></div>
<button onclick="checkout()">Checkout</button>
</div>

<div id="loginForm" class="page">
<h2>Customer Login/Register</h2>
<input type="text" id="username" placeholder="Username">
<input type="text" id="userWhatsapp" placeholder="WhatsApp Number">
<input type="text" id="userAddress" placeholder="Address"> 
<input type="password" id="password" placeholder="Password">
<button onclick="customerRegister()">Register</button>
<button onclick="customerLogin()">Login</button>
<p id="loginMsg" style="color:red;"></p>
</div>

<div id="reviewForm">
<h3>Submit Review</h3>
<input type="text" id="reviewName" placeholder="Your Name">
<textarea id="reviewText" placeholder="Your review"></textarea>
<button onclick="submitReview()">Submit</button>
</div>
<div id="reviewList"></div>

<div id="support" onclick="openWhatsApp()">üí¨ Support</div>

<script>
// ====== DATA STORAGE ======
// ‡¶™‡ßç‡¶∞‡¶æ‡¶•‡¶Æ‡¶ø‡¶ï ‡¶™‡¶£‡ßç‡¶Ø ‡¶°‡ßá‡¶ü‡¶æ (‡¶Ø‡¶¶‡¶ø localStorage ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶•‡¶æ‡¶ï‡ßá)
let initialProducts = [
    { id: 1, name: "Luxury Smartphone X", price: 799.99, category: "Electronics", stock: 15, rating: 5, badge: "New", image: "https://via.placeholder.com/150/007bff/ffffff?text=Smartphone" },
    { id: 2, name: "Cotton T-Shirt (Blue)", price: 19.99, category: "Apparel", stock: 50, rating: 4, badge: "Sale", image: "https://via.placeholder.com/150/ffc107/000000?text=T-Shirt" },
    { id: 3, name: "Modular Sofa Set", price: 1299.00, category: "Furniture", stock: 5, rating: 5, badge: "Popular", image: "https://via.placeholder.com/150/dc3545/ffffff?text=Sofa" }
];
if (!localStorage.getItem("products")) {
    localStorage.setItem("products", JSON.stringify(initialProducts));
}

let products = JSON.parse(localStorage.getItem("products")||'[]');
let cart = JSON.parse(localStorage.getItem("cart")||"[]");
let reviews = JSON.parse(localStorage.getItem("reviews")||'[]');
let customers = JSON.parse(localStorage.getItem("customers")||'[]');
let orders = JSON.parse(localStorage.getItem("orders")||'[]'); // ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú
let loggedCustomer = JSON.parse(localStorage.getItem("loggedCustomer")||'null');

// ====== AUTO LOGIN ======
if(loggedCustomer){
    showPage('home');
    document.getElementById('logoutBtn').style.display='inline-block';
} else {
    showPage('loginForm');
}

// ====== PAGE CONTROL & DARK MODE (‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§) ======
function showPage(page){ document.querySelectorAll('.page').forEach(p=>p.style.display='none'); document.getElementById(page).style.display='block'; }
function toggleDarkMode(){ document.body.classList.toggle('dark'); }

// ====== CUSTOMER SYSTEM (‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§) ======
function customerRegister(){
    let username=document.getElementById("username").value;
    let whatsapp=document.getElementById("userWhatsapp").value;
    let address=document.getElementById("userAddress").value;
    let password=document.getElementById("password").value;
    if(!username || !whatsapp || !address || !password){ alert("Fill all fields"); return; }
    if(customers.some(c=>c.username===username)){ alert("Username exists"); return; }
    customers.push({username, whatsapp, address, password});
    localStorage.setItem("customers",JSON.stringify(customers));
    alert("Registered successfully! Now login.");
    document.getElementById("username").value='';
    document.getElementById("userWhatsapp").value='';
    document.getElementById("userAddress").value='';
    document.getElementById("password").value='';
}
function customerLogin(){
    let username=document.getElementById("username").value;
    let password=document.getElementById("password").value;
    let user = customers.find(c=>c.username===username && c.password===password);
    if(user){
        loggedCustomer = user;
        localStorage.setItem("loggedCustomer",JSON.stringify(loggedCustomer));
        alert("Welcome, "+user.username);
        showPage('home');
        document.getElementById('logoutBtn').style.display='inline-block';
        document.getElementById("username").value='';
        document.getElementById("password").value='';
    } else {
        document.getElementById("loginMsg").innerText="Invalid credentials";
    }
}
function logout(){
    loggedCustomer=null;
    localStorage.removeItem("loggedCustomer");
    showPage('loginForm');
    document.getElementById('logoutBtn').style.display='none';
}

// ====== PRODUCTS RENDERING (‡¶á‡¶Æ‡ßá‡¶ú URL ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá) ======
const homeList = document.getElementById("homeList");
const categoryList = document.getElementById("categoryList");
const cartList = document.getElementById("cartList");
const cartLink = document.getElementById("cartLink");
const reviewList = document.getElementById("reviewList");
const carousel = document.getElementById("carousel");

function renderProducts(list, arr){
    list.innerHTML='';
    if(arr.length===0){ list.innerHTML="<p>No products.</p>"; return; }
    arr.forEach((p,i)=>{
        // ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü‡ßá‡¶∞ ID ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶Æ‡ßÇ‡¶≤ ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßá‡¶§‡ßá ‡¶§‡¶æ‡¶∞ ‡¶á‡¶®‡ßç‡¶°‡ßá‡¶ï‡ßç‡¶∏ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶®‡ßá‡¶ì‡ßü‡¶æ
        const productIndexInMainArray = products.findIndex(prod => prod.id === p.id);
        
        const div=document.createElement('div'); div.className='product';
        let stars=''; for(let s=1;s<=5;s++){ stars += s<=p.rating ? '‚òÖ':'‚òÜ'; }
        let badgeHTML=p.badge?`<div class="badge">${p.badge}</div>`:'';
        
        div.innerHTML=`${badgeHTML}<div class="product-image-container"><img src="${p.image}" alt="${p.name}"></div>
        <h3>${p.name}</h3>
        <p>Category: ${p.category}</p><p>$${p.price}</p><p>Stock: ${p.stock}</p><p>${stars}</p>
        <button onclick="addToCart(${productIndexInMainArray})">Add to Cart</button>`; // ‡¶Æ‡ßÇ‡¶≤ ‡¶á‡¶®‡ßç‡¶°‡ßá‡¶ï‡ßç‡¶∏ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶≤‡ßã
        list.appendChild(div);
    });
    updateCartBadge();
}

function updateCartBadge(){ cartLink.setAttribute('data-count',cart.length); }

function renderCarousel(){ 
    carousel.innerHTML=''; 
    // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡ß©‡¶ü‡¶ø ‡¶™‡¶£‡ßç‡¶Ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
    products.slice(0,3).forEach(p=>{
        const img=document.createElement('img'); img.src=p.image; img.alt=p.name; carousel.appendChild(img);
    }); 
    let carouselIdx=0;
    setInterval(()=>{ 
        const imgs=carousel.querySelectorAll('img'); 
        imgs.forEach((img,i)=>{ img.style.transform=`translateX(-${carouselIdx*100}%)`; }); 
        carouselIdx=(carouselIdx+1)%(imgs.length || 1); 
    },3000);
}

// ====== CATEGORY FILTERING & SORTING (‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡¶®‡¶ø, ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶Ü‡¶õ‡ßá) ======
function filterCategory() {
    let filteredProducts = products;
    const selectedCategory = document.getElementById('categoryFilter').value;
    const searchTerm = document.getElementById('searchInput').value.toLowerCase();
    const sortValue = document.getElementById('sortSelect').value;

    if (selectedCategory !== 'All') {
        filteredProducts = filteredProducts.filter(p => p.category === selectedCategory);
    }
    if (searchTerm) {
        filteredProducts = filteredProducts.filter(p => p.name.toLowerCase().includes(searchTerm));
    }

    if (sortValue === 'price-asc') {
        filteredProducts.sort((a, b) => a.price - b.price);
    } else if (sortValue === 'price-desc') {
        filteredProducts.sort((a, b) => b.price - a.price);
    } else if (sortValue === 'name-asc') {
        filteredProducts.sort((a, b) => a.name.localeCompare(b.name));
    } else if (sortValue === 'name-desc') {
        filteredProducts.sort((a, b) => b.name.localeCompare(a.name));
    }

    renderProducts(categoryList, filteredProducts);
}

function populateCategoryFilter() {
    const categories = [...new Set(products.map(p => p.category))];
    const filter = document.getElementById('categoryFilter');
    categories.forEach(cat => {
        const option = document.createElement('option');
        option.value = cat;
        option.textContent = cat;
        filter.appendChild(option);
    });
}


// ====== CART & CHECKOUT (‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá) ======
function renderCart(){
    // ... (rest of renderCart is same) ...
    cartList.innerHTML='';
    if(cart.length===0){ cartList.innerHTML="<p>Cart is empty.</p>"; return; }
    cart.forEach((p,i)=>{
        const div=document.createElement('div'); div.className='product';
        const quantity = p.quantity || 1; // Quantity
        div.innerHTML=`<p>${p.name} - $<span class="price">${p.price * quantity}</span></p>
        <input type="number" value="${quantity}" min="1" onchange="updateQuantity(${i},this.value)">
        <button onclick="removeFromCart(${i})">Remove</button>`;
        cartList.appendChild(div);
    });
    updateCartTotal();
    updateCartBadge();
}

function addToCart(i){ 
    if(!loggedCustomer){ alert("Please login first!"); showPage('loginForm'); return; }
    
    const existingItem = cart.find(item => item.id === products[i].id);
    if(existingItem){
        existingItem.quantity = (existingItem.quantity || 1) + 1;
    } else {
        cart.push({...products[i], quantity: 1}); 
    }
    
    localStorage.setItem("cart",JSON.stringify(cart)); 
    renderCart(); 
    alert(`${products[i].name} added to cart!`);
}

function removeFromCart(i){ 
    cart.splice(i,1); 
    localStorage.setItem("cart",JSON.stringify(cart)); 
    renderCart(); 
}

function updateQuantity(i, val){ 
    const quantity = Number(val);
    if (quantity < 1) return;
    cart[i].quantity = quantity; 
    localStorage.setItem("cart",JSON.stringify(cart)); 
    updateCartTotal(); 
}

function updateCartTotal(){ 
    let total=0; 
    cart.forEach(p=>{ total+=Number(p.price) * (p.quantity || 1); }); 
    document.getElementById('cartSummary').innerText=`Total: $${total.toFixed(2)}`; 
}

function checkout(){ 
    if(cart.length===0){ alert("Cart empty!"); return; } 
    if(!loggedCustomer) { alert("Please login to checkout!"); return; }

    const total = cart.reduce((sum, p) => sum + (p.price * (p.quantity || 1)), 0);

    const newOrder = {
        id: orders.length + 1,
        customerName: loggedCustomer.username,
        customerWhatsapp: loggedCustomer.whatsapp,
        customerAddress: loggedCustomer.address,
        products: cart.map(p => ({name: p.name, price: p.price, quantity: p.quantity || 1, id: p.id})),
        total: total.toFixed(2),
        date: new Date().toLocaleString(),
        status: "Pending"
    };

    orders.push(newOrder);
    localStorage.setItem("orders",JSON.stringify(orders));

    cart=[]; 
    localStorage.setItem("cart",JSON.stringify(cart)); 
    alert(`Order placed successfully! Total: $${newOrder.total}. Check your WhatsApp for confirmation.`); 
    renderCart(); 
}

// ====== REVIEWS & SUPPORT (‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§) ======
function submitReview(){
    let name=document.getElementById("reviewName").value;
    let text=document.getElementById("reviewText").value;
    if(!name || !text){ alert("Enter name & review"); return; }
    reviews.push({name: name, text: text, customer: loggedCustomer ? loggedCustomer.username : 'Guest'});
    localStorage.setItem("reviews",JSON.stringify(reviews));
    renderReviews();
    document.getElementById("reviewName").value='';
    document.getElementById("reviewText").value='';
}

function renderReviews(){
    reviewList.innerHTML='';
    if(reviews.length===0){ reviewList.innerHTML="<p>No reviews yet.</p>"; return; }
    reviews.forEach(r=>{
        let div=document.createElement('div');
        div.innerHTML=`<p><b>${r.name}:</b> ${r.text}</p>`;
        reviewList.appendChild(div);
    });
}
function openWhatsApp(){ window.open("https://wa.me/8801913821910","_blank"); }

// ====== INITIAL RENDER ======
populateCategoryFilter();
renderProducts(homeList,products.slice(0, 6));
renderProducts(categoryList,products);
renderCart();
renderCarousel();
renderReviews();
</script>
</body>
</html>
